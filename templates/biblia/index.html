<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Aprendizajes B√≠blicos</title>

  <!-- tu CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
  <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">
</head>
<body>

<header>
  <h1>M√≥dulo de Aprendizajes B√≠blicos</h1>
  <nav>
    <ul class="menu">
      <li><a class="lista tooltip" href="/" data-tooltip="Inicio de la p√°gina principal">üè† Inicio</a></li>
    </ul>
  </nav>
</header>

<main>
  <h2>Bienvenido al M√≥dulo Relacionado a la Fe</h2>
  <p>En esta secci√≥n podr√°s registrar tus aprendizajes b√≠blicos</p>

  <!-- Botones principales -->
  <div style="text-align:center; margin-top: 18px;">
    <button id="toggle-btn-reg" class="toggle-btn registrar">Mostrar Registro de Aprendizajes</button>
    <button id="toggle-btn-dat" class="toggle-btn">Mostrar Secci√≥n de Aprendizajes</button>
  </div>

  <!-- FORM: Registro (oculto al inicio) -->
  <section id="registro-contenedor" class="Registro-Aprendizaje" style="display:none;">
    <form action="/biblia/registrar" method="post" id="form-aprendizaje" enctype="multipart/form-data">
      <label for="libro">Libro:</label>
      <select name="libro" id="libro" required>
        <option value="" disabled selected>-- Selecciona el libro --</option>
        {% for libro in libros %}
          <option value="{{ libro.nombre }}">{{ libro.nombre }}</option>
        {% endfor %}
      </select>

      <label for="capitulo">Cap√≠tulo:</label>
      <select name="capitulo" id="capitulo" required>
        <option value="" disabled selected>-- Selecciona un cap√≠tulo --</option>
      </select>

      <label for="versiculoinicio">Vers√≠culo Inicio:</label>
      <select name="versiculoinicio" id="versiculoinicio" required>
        <option value="" disabled selected>-- Selecciona inicio --</option>
      </select>

      <label for="versiculofin">Vers√≠culo Fin:</label>
      <select name="versiculofin" id="versiculofin" required>
        <option value="" disabled selected>-- Selecciona fin --</option>
      </select>

      <label for="texto">Texto del Aprendizaje:</label>
      <textarea id="texto" name="texto" required></textarea>

      <label for="archivos">Archivos (opcional):</label>
      <input type="file" id="archivos" name="archivos" multiple>

      <button type="submit" id="toggle-btn-reg-submit">Registrar Aprendizaje</button>
    </form>
  </section>

  <!-- SECCI√ìN DE DETALLE (oculta al inicio) -->
  <section id="detalle-contenedor" class="Detalle-Aprendizaje" style="display:none;">
    <div class="Desplegable-Aprendizaje">
      <select id="opciones" name="opciones">
        <option value="" disabled selected>-- Selecciona un aprendizaje --</option>
      </select>
      <!-- bot√≥n para cargar adjuntos del aprendizaje seleccionado -->
      <button id="btnAdjuntos" style="margin-left: 12px;">Mostrar Adjuntos</button>
      <button id="btnVerVersiculo" style="margin-left: 12px;">Ver vers√≠culo</button>
    </div>

    <div class="Detalle-Aprendizaje-Texto">
      <pre id="texto-detalle" style="white-space: pre-wrap;">Selecciona de la lista de arriba algo para leer</pre>
    </div>
  </section>

</main>

<footer>
  La gracia de nuestro Se√±or Jesucristo sea con todos vosotros (Revelaci√≥n 22:21).
</footer>

<!-- =============== MODAL UNIFICADO (lightbox + media + pdf) =============== -->
<div id="lightboxModal" class="modal" aria-hidden="true">
  <div class="modal-content" role="dialog" aria-modal="true">
    <button id="closeLightbox" class="cerrar" title="Cerrar">x</button>

    <!-- controls prev/next -->
    <button id="prevSlide" style="position:absolute; left:8px; top:50%; transform:translateY(-50%); z-index:101;">‚óÄ</button>
    <button id="nextSlide" style="position:absolute; right:8px; top:50%; transform:translateY(-50%); z-index:101;">‚ñ∂</button>

    <div id="lightbox-body" style="min-height:320px;">
      <!-- aqu√≠ JS inyecta: <img>, <video>, <audio> o <iframe> -->
    </div>

    <div id="lightbox-meta" style="margin-top:12px; text-align:center; font-size:14px; color:#333;">
      <span id="meta-text"></span>
      <div style="margin-top:6px;"><a id="open-original" href="#" target="_blank">Abrir en pesta√±a nueva</a></div>
    </div>
  </div>
</div>

<!-- Modal para vers√≠culos -->
<!-- MODAL VERS√çCULO -->
<div id="modalVersiculo" class="modal">
  <div class="modal-content">
    <span id="cerrarVersiculo" class="cerrar">&times;</span>
    <h2 id="tituloVersiculo"></h2>
    <pre id="textoVersiculo" style="white-space: pre-wrap; text-align: justify;"></pre>
  </div>
</div>


<!-- cargamos el JS externo -->
<script src="{{ url_for('static', filename='js/biblia.js') }}"></script>
</body>
</html>
